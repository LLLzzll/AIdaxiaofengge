<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2025 大小风格（ECharts）</title>
  <style>
    body { font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Microsoft YaHei","PingFang SC","Hiragino Sans GB",Arial,sans-serif; margin: 16px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    .panel { border: 1px solid #e5e7eb; border-radius: 10px; padding: 12px; }
    .chart { width: 100%; height: 420px; }
    .chart.small { height: 320px; }
    .meta { color: #4b5563; font-size: 13px; margin-top: 6px; }
    .row { display:flex; flex-wrap:wrap; gap:12px; align-items: center; }
    .badge { background:#f3f4f6; border:1px solid #e5e7eb; padding:4px 8px; border-radius:999px; font-size:12px; color:#374151; }
    .help { color:#111827; font-size:13px; line-height: 1.7; margin-top: 10px; }
    .help b { font-weight: 700; }
    .help .k { display:inline-block; min-width: 110px; color:#374151; }
  </style>
</head>
<body>
  <div class="grid">
    <div class="panel">
      <div class="row">
        <div class="badge">主线：style_ret（日度大-小，非累积）</div>
        <div class="badge">平滑：10日均值</div>
        <div class="badge">波动：10日滚动标准差</div>
      </div>
      <div id="chart1" class="chart"></div>
      <div class="help">
        <div><b>指标说明</b></div>
        <div><span class="k">style_ret（日度柱）</span>大盘组等权日收益 − 小盘组等权日收益；>0 表示大盘相对更强；<0 表示小盘相对更强。</div>
        <div><span class="k">10日均值</span>style_ret 的滚动均值，用来更清晰看“强弱区间”。</div>
        <div><span class="k">10日波动</span>style_ret 的滚动标准差，越大表示大小切换越剧烈。</div>
        <div><span class="k">数值单位</span>%（日度）。</div>
      </div>
    </div>

    <div class="panel">
      <div class="row">
        <div class="badge">涨跌统计：上涨家数占比</div>
      </div>
      <div id="chart2" class="chart small"></div>
      <div class="help">
        <div><b>指标说明</b></div>
        <div><span class="k">小/大盘上涨比例</span>当日上涨股票数 ÷ 当日有效股票数（能取到收益的成分）。</div>
        <div><span class="k">上涨比例差值</span>大盘上涨比例 − 小盘上涨比例（百分点）。</div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <script>
    const data = {"dates": ["2025-01-02", "2025-01-03", "2025-01-06", "2025-01-07", "2025-01-08", "2025-01-09", "2025-01-10", "2025-01-13", "2025-01-14", "2025-01-15", "2025-01-16", "2025-01-17", "2025-01-20", "2025-01-21", "2025-01-22", "2025-01-23", "2025-01-24", "2025-01-27", "2025-02-05", "2025-02-06", "2025-02-07", "2025-02-10", "2025-02-11", "2025-02-12", "2025-02-13", "2025-02-14", "2025-02-17", "2025-02-18", "2025-02-19", "2025-02-20", "2025-02-21", "2025-02-24", "2025-02-25", "2025-02-26", "2025-02-27", "2025-02-28", "2025-03-03", "2025-03-04", "2025-03-05", "2025-03-06", "2025-03-07", "2025-03-10", "2025-03-11", "2025-03-12", "2025-03-13", "2025-03-14", "2025-03-17", "2025-03-18", "2025-03-19", "2025-03-20", "2025-03-21", "2025-03-24", "2025-03-25", "2025-03-26", "2025-03-27", "2025-03-28", "2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-18", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-28", "2025-04-29", "2025-04-30", "2025-05-06", "2025-05-07", "2025-05-08", "2025-05-09", "2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-19", "2025-05-20", "2025-05-21", "2025-05-22", "2025-05-23", "2025-05-26", "2025-05-27", "2025-05-28", "2025-05-29", "2025-05-30", "2025-06-03", "2025-06-04", "2025-06-05", "2025-06-06", "2025-06-09", "2025-06-10", "2025-06-11", "2025-06-12", "2025-06-13", "2025-06-16", "2025-06-17", "2025-06-18", "2025-06-19", "2025-06-20", "2025-06-23", "2025-06-24", "2025-06-25", "2025-06-26", "2025-06-27", "2025-06-30", "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-04", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-21", "2025-07-22", "2025-07-23", "2025-07-24", "2025-07-25", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-11", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-25", "2025-08-26", "2025-08-27", "2025-08-28", "2025-08-29", "2025-09-01", "2025-09-02", "2025-09-03", "2025-09-04", "2025-09-05", "2025-09-08", "2025-09-09", "2025-09-10", "2025-09-11", "2025-09-12", "2025-09-15", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-22", "2025-09-23", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-29", "2025-09-30", "2025-10-09", "2025-10-10", "2025-10-13", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-03", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-27", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-25", "2025-12-26", "2025-12-29", "2025-12-30", "2025-12-31"], "style_ret": [-1.448123180350511, 2.5777729222660315, 0.2980161365912548, -2.1671675685484804, -0.1838609945793352, -0.6368188659840599, 1.4154405730991377, -0.5049766466109183, -1.5083467880681143, -0.6484422789170935, -0.288086468553694, 0.8358516784139196, -0.9681707671928219, 1.037002062391516, 0.29736057508614633, -0.20554216391207988, 0.1518666652701242, -0.32375351151624937, -1.2481966731591416, 0.35003896946805313, 0.41509244497094194, -1.6690239863395104, -0.19319281182157635, 0.7040426151469557, 0.2849920939453653, 0.3506092229733532, -1.5339456342635625, 0.7693792211586284, -0.42241010487834607, -0.8752485356011332, 1.4360376239470014, -0.601396112063324, -0.5554780277503714, -0.0725887769440341, -0.2632300294691748, -0.06068497916397533, -0.32675139259053704, -0.6876183545622339, 0.430164345481315, 0.0951644279611516, 0.08047841311611438, -1.2605986385793782, -0.26744771516543486, -0.7963693919669689, -0.23334094925479043, 0.0810835975476841, -0.6857335100442161, -0.3565042812257381, -0.21756357602887083, -0.9104158672952006, -0.14962420272998186, 3.078464510509772, -0.20255393637692637, -1.9380406332019242, 1.052328258918602, 1.2516938124081363, 0.28764994950383793, -1.0199517986518354, -0.2897588778463993, -0.8158794706956395, 3.269709854644344, 0.650144767647132, -0.7763977817201753, -1.4581109507116468, 0.0007386416654986405, -1.571865363927292, -1.0564700706813601, 1.081045121101481, -1.3030260357810162, 0.4932807641697256, -0.059698782629618447, -0.8274383931017971, -0.10783829286719068, 0.04751009496931618, 0.3046445029482306, 0.9526643803393533, -1.4492144573993582, -0.6060737397792554, -1.0058288618177518, -0.8866489796566783, -1.2576781260951755, -0.33276124312518196, 0.1994104124743209, 0.09326518350764994, 0.5153719008749347, -1.6762924242083068, -0.5981589802048841, -1.5038415451898828, -1.0367765230185149, 0.546883065742686, 0.6812115640262922, -0.01923628302201979, -0.9922533776964004, -1.3854736945724762, 0.148695396999362, -0.3061159764645825, 0.646538808485971, -0.4148890282548791, -0.5042513785692709, 0.3012109383552635, -0.895857946210922, -0.7262968568694207, -0.10063767203407686, -0.22984691522214992, -0.28210103711758183, 1.150977578830808, -0.8487908100489621, -0.04316548845671648, 0.6163219054369541, 0.7617841761235226, 0.33020755954834263, -1.5959199197795735, -0.43077522169331983, 1.2277604479262585, -0.5740401606062552, -0.34785018437281845, -0.5128561263891755, -0.19747988590039683, -0.6175775214767664, -0.051877871036890094, 1.0654003592084589, -1.3611744945405724, 0.22882777440348528, -0.23985078391809428, 0.1927980092664326, 0.6105742982337593, -0.9479615574078367, 1.0590235702624835, -1.0060896035043672, 0.251983913500389, 0.09634554522519588, -0.32099384998069136, 1.1355538531783582, 0.25119315914432266, 0.26013335495690715, -0.7575989793996919, -0.8532427250125951, 0.6008898490846412, -0.21768872941009842, -0.4381018717324669, -1.3018504726729976, -0.7194035460882182, -0.46878709676557595, 0.038672893577133306, -0.20936652382853158, -0.8914079144090027, -0.37892603420645077, 0.43281688747555286, 1.150961811221251, 1.2238054184448164, 0.4040453106419451, 0.3712777491372405, -1.3853675968002501, 0.32652358843332063, -0.3362542434408071, 1.8305644663672576, 1.49278150255173, -0.8806253778214682, 1.5245890781701446, 1.8488177603554317, 0.9776219344555861, -0.2748546326722908, -0.7895082635174179, 0.8848809731103022, -2.712341754156421, 0.7694366264251604, -0.8517481263666822, -0.2117520005599726, -0.6724744693529174, 1.5570220621746491, 0.3439341115639411, 0.11331979666006153, -0.8310964178007862, 0.9974840631469913, 0.9157661623862072, 0.5042503324229117, 0.7543923625656153, 0.6761749187997563, -0.11847523193241304, 0.9696562503324572, -1.3179890572849955, 0.2732726281586469, 0.7490895797514125, 1.9683718886934574, -2.074575743106967, -0.06194948224668957, -1.3950185672858761, -0.03078269087057068, 0.20770726446916735, -1.3455186708860547, -1.3398109267744083, -0.6248814085311148, -1.0191941240508902, -0.5191507808061889, 0.7744117419645185, 0.9339795867072327, -0.6837563525002242, 2.4675227379261875, -0.23078448335303003, -2.0245767627409936, -0.9263661605148243, -1.3588208598939433, -0.8024242662712445, 1.2343278461149487, -0.2799336629114208, -0.24229269927630565, -1.2443236164071476, -0.5670519074718033, 0.3395639083038337, -1.9470405800734047, -0.6668515389004895, -0.2727832419227942, 1.4302720070036297, 0.07809249633453884, 1.42949863595654, -1.152598847852061, -0.4986714769968396, 0.8157404499586527, -0.8841458803964651, -0.6183097932363723, 0.9257978923815681, -0.49953142598896555, 0.2228405108236434, 1.6033881800380119, -0.4190549347823466, -0.02633647888180459, -0.029214919346965545, 1.1570825970615348, 1.2639221210750011, 1.883414410839791, -1.0623771235090456, 0.4703563345624294, 1.4798076738043786, -1.7245624840524991, -1.3669473819460687, 0.8004667642143378, 0.6483781271300014, -0.11183465898784231, -0.38737239811775187, 0.8889065428115729, -0.468846204028517, 0.8744888398533687, -0.3651033552678441], "style_ma": [null, null, null, null, null, null, null, null, null, -0.2806506691102088, -0.16464699793052712, -0.3388391223157383, -0.46545781269414593, -0.1450408496001463, -0.09691869263359816, -0.053791022426400166, -0.1801484132093015, -0.1620260996998346, -0.13601108820893737, -0.036162963370422685, 0.03415492798204091, -0.2163326384933021, -0.13883484295617754, -0.17213078768063356, -0.17336763579471168, -0.11775249710616839, -0.286333727059537, -0.17702045379204925, -0.09444179696396968, -0.21697054747088834, -0.11487602957328236, -0.008113242145663738, -0.04434176373854324, -0.12200490294764221, -0.17682711528909623, -0.21795653550282906, -0.09723711133552652, -0.24293686890761276, -0.15767942387164666, -0.060638127515418166, -0.19619404859850686, -0.26211430125011226, -0.23331126999161864, -0.30568933149391214, -0.3027004234724737, -0.2885235658013078, -0.32442177754667567, -0.29131037021302614, -0.35608316236404464, -0.45664119188967994, -0.4796514534742895, -0.04574513856537444, -0.03925576068652359, -0.15342288481001912, -0.024855963992679853, 0.09220505749336534, 0.18954340344817075, 0.12319865170556102, 0.11597912152380818, 0.1254327611837643, 0.4673661669211968, 0.22453419263493285, 0.16714980810060798, 0.2151427763496357, 0.10998381462432535, -0.17237210300921746, -0.30678410502773723, -0.0966844130524056, -0.19801112884586725, -0.06709510535933076, -0.400035969086727, -0.5477942851616199, -0.4809383362763214, -0.3303762317082251, -0.29998564557995194, -0.04753267115328738, -0.08680710982508719, -0.2555189959131608, -0.22579927851683443, -0.36379225289947476, -0.4835901872460305, -0.43412247224836903, -0.4033976017142178, -0.39882209286038445, -0.377749353067714, -0.64064503352248, -0.5555394858030327, -0.6453162663440953, -0.6484110324641715, -0.5050578279242353, -0.31116885891208845, -0.27981636290177225, -0.3989827419188444, -0.546856629726857, -0.5835242801144144, -0.44650663534004187, -0.32203685647095637, -0.213141604777456, -0.1598890903325316, -0.18445630307127384, -0.34216325409499526, -0.4128693114797353, -0.32370774091350296, -0.2081450629784703, -0.25122470639016464, -0.10551535086062559, -0.25504831271411893, -0.21787595873430263, -0.10581863033368015, -0.05976130655685422, 0.06284524401907225, -0.02411706227194304, -0.05713081723786734, 0.08862991907697351, 0.059436006728106186, -0.09044676959225649, -0.05685330122627783, -0.07228474097064587, -0.1956746836620179, -0.2770408883780591, -0.20352160841204753, -0.1800470658881474, -0.11408676627846688, -0.2608478894629022, -0.1841640724756334, -0.08832162421497562, -0.13183216731684172, -0.006181821700553692, -0.04503302990331379, -0.01464685144958587, -0.11155233284791218, -0.00753426839192408, 0.0831383394855632, 0.13224273379180493, 0.13897626836085236, 0.0021589405975072293, 0.01163082383703138, -0.03418254828075285, 0.044657539128674026, -0.024351039394611564, -0.16417064118443095, -0.2040116107951836, -0.364445705789577, -0.385697732346296, -0.4326477202248399, -0.44602861372577096, -0.39859694464515655, -0.4154042408060653, -0.27853918674293043, -0.11234845772520208, 0.0582411206062922, 0.16730925012883804, 0.07565120012537063, 0.10443626961098935, 0.0917474976497618, 0.36394473572738784, 0.5511154894032059, 0.4197712628735038, 0.45713398956839324, 0.5196352237594547, 0.5769928861408188, 0.5123796479598657, 0.5719655812881489, 0.6278013197558471, 0.3901925686842856, 0.28407978469007594, 0.04962682179823474, 0.11651415952438429, -0.10319219522792192, -0.13237176504600018, -0.19574054733516463, -0.1569231044019294, -0.16108191983026623, -0.1498216108265973, 0.2129891808276655, 0.18647055142744065, 0.3470846003206704, 0.43587729225664323, 0.49127721599869373, 0.4325406348144745, 0.2663483179295809, 0.28234360107943945, 0.44036220083465927, 0.5374509833893059, 0.23841679283998843, 0.1817968113730283, -0.03314428161212083, -0.10384004257915354, -0.0712217929389955, -0.3027392850608467, -0.304921472009788, -0.3947368756787641, -0.5715652460589943, -0.8203175130089588, -0.5354187645018103, -0.4358258576064181, -0.3646996361278529, -0.1148690932481771, -0.15871826803039682, -0.22662407721589067, -0.18527960058993231, -0.2586735457262152, -0.2369965599482506, -0.061648697256136864, -0.16708323774373082, -0.28471046634208463, -0.340767192732777, -0.6442246572725759, -0.5871898181068896, -0.5794361998401307, -0.5534847376786972, -0.4448809758815823, -0.22161134855409495, -0.33723488353213593, -0.16629165364533985, -0.25732226850291534, -0.18275705456188457, -0.04447781881883898, -0.16684879768886884, -0.03397571900516559, 0.12528922412304017, 0.10261440571642301, -0.018128743901575598, 0.13440082446877172, -0.05045453260511696, 0.062171704291908686, 0.10911736005689608, 0.1432515747671843, 0.35805837491433096, 0.6082307953219473, 0.40941329373288604, 0.5064020697880256, 0.6320987860860992, 0.299303719677048, 0.20451447496067582, 0.28719479927029007, 0.35495410391798676, 0.22806237831304904, 0.06293292639377374, -0.03651786040904808, 0.022835231539004765, 0.06324848206809869, -0.12124262083912359], "style_vol": [null, null, null, null, null, null, null, null, null, 1.4194348983746472, 1.3595609416219059, 1.0441559699666176, 1.0350794911753896, 0.9414766922326459, 0.9515169091247607, 0.9339383013827202, 0.7869885258425379, 0.7807392023550414, 0.7338182207042259, 0.7242133726677514, 0.7311395227092912, 0.84601980144657, 0.8039459169647134, 0.7552575071301416, 0.7544128703059086, 0.7720704574713525, 0.8827700921144325, 0.9432322084447294, 0.8725306892861243, 0.8890538852610812, 1.0188474305471495, 0.8850482580656321, 0.9007418224000887, 0.8616795975085696, 0.8502724262835971, 0.8316684971841302, 0.6959669230674194, 0.6450298505649026, 0.6743505399122478, 0.6278351081680859, 0.356481852904691, 0.47947047468975157, 0.46841309499605355, 0.4959294684570374, 0.4963037263980485, 0.5059167000056627, 0.5214289046138133, 0.5060903305000888, 0.4407196743039251, 0.44103989096833296, 0.41514561153586893, 1.1410850934796783, 1.139868050911605, 1.2734691978353008, 1.3282264102851724, 1.3888041173064993, 1.362075811287306, 1.4070437468668155, 1.4091700772509776, 1.401817186106344, 1.7103430577531462, 1.4511818997888934, 1.4809865716224384, 1.4113233946234753, 1.3808616088972907, 1.40984141521371, 1.4251011039861774, 1.462655933006484, 1.5117896948711973, 1.5090212381651873, 0.9575197736392651, 0.8890110051028559, 0.8950275999623546, 0.8371493690570277, 0.8558134526633026, 0.8100671452525793, 0.8716020598591633, 0.7787692106698787, 0.7390079409937461, 0.7183639004774963, 0.760662277703102, 0.751850394392079, 0.7726558464546469, 0.7757519887200564, 0.7994835232245305, 0.7436872963460845, 0.6874452028012923, 0.7505074241589869, 0.752221049717796, 0.8339329721235824, 0.8643472972241136, 0.86914995891367, 0.8777937494175329, 0.9096327898464566, 0.8685175310764185, 0.7805965750256519, 0.8498889970999882, 0.7449220102085004, 0.6969928527085926, 0.6732377990788598, 0.6313335818990606, 0.6307422572146982, 0.6021099012964907, 0.4726688514392833, 0.455865282677687, 0.6343119139681526, 0.6132279185363484, 0.6137284740301605, 0.6564441675114231, 0.7027026631188061, 0.6452229380469666, 0.8027692309970502, 0.8129891566077805, 0.9041395608310685, 0.9219774916861094, 0.8432841242586663, 0.8159664888193207, 0.8171372103371372, 0.7944483276728438, 0.7240379648210593, 0.8230988701895219, 0.7812598341966583, 0.7855718916408017, 0.6284003626055672, 0.6327088382816926, 0.6762513053691862, 0.7192327740736492, 0.8104600696826834, 0.8513079105816059, 0.8564439037203578, 0.7712454612578041, 0.643556841862353, 0.7375678423468901, 0.72998211026404, 0.7309127168187375, 0.7602889259149357, 0.7476213495626989, 0.6879635910764018, 0.6042956160791786, 0.6172528123044214, 0.7341625035614489, 0.7541565020306552, 0.5903904266885627, 0.5692123808035228, 0.5278864038463278, 0.538625164460614, 0.5193195763626468, 0.48496112775496153, 0.6947242789737444, 0.8366043730024579, 0.7348394632262589, 0.6859060078805782, 0.8270683373601335, 0.8306397848633266, 0.8369115150071927, 0.9201306958997905, 0.9423287367432932, 1.0464344395276681, 1.0815240470747882, 1.1468402472722758, 1.1547330023137632, 1.1851981330809152, 1.090372730689242, 1.0907037585459702, 1.5044114995414342, 1.4269564060147761, 1.3986225185551386, 1.3647757291985467, 1.287574566379136, 1.2408817839977229, 1.1931617039608193, 1.1966111865115465, 1.1991236476263034, 1.210511669528605, 0.8459509856188785, 0.8305864429084573, 0.7597903940427719, 0.7388199040615383, 0.663397420174113, 0.5792140074167951, 0.8027524886659257, 0.8009560779644542, 0.7072780455717589, 0.8454023777977503, 1.1651272413856937, 1.164530787866484, 1.2428315315168905, 1.217856262474918, 1.2217825282989954, 1.2219826721224296, 1.2240149204498074, 1.2097433430966837, 1.1518215416697306, 0.7358234615597301, 0.7476816181538157, 0.8735000541489463, 0.8136236219367854, 1.2130622697110451, 1.208021063170983, 1.2978895150048935, 1.264648176901892, 1.3133543876480103, 1.3011393343656885, 1.3749500144823301, 1.3437871328553173, 1.286978813452758, 1.3181226721392676, 0.8743807026755707, 0.9216682914069183, 0.9084641272633117, 0.9011295316141813, 0.8576835199752886, 1.027967651014256, 0.9035013903601924, 1.0631546810216452, 1.1083942778230327, 1.0585797059358322, 1.0925720015203988, 1.1131152504631454, 0.9433634709770695, 0.9589573102521873, 0.9720076467840406, 0.8569442038725381, 0.9998103282475425, 0.8996237570335723, 0.8126034316716718, 0.7898443256962574, 0.830123821430687, 0.8124645194817733, 0.8620673598314541, 0.999068408508966, 0.9467314818089964, 0.9874669702021132, 1.1680345717993785, 1.2670721463433172, 1.277269354010466, 1.2765917330869634, 1.2508061669830832, 1.2070957710656038, 1.0740834229224212, 1.0264387987568933, 1.053612615457553, 0.9325813383292068], "small_up_ratio": [18.9453125, 5.37109375, 35.15625, 93.65234375, 36.62109375, 56.8359375, 7.6171875, 67.96875, 97.94921875, 35.25390625, 60.83984375, 42.28515625, 77.734375, 27.34375, 20.1171875, 51.26953125, 72.0703125, 41.015625, 77.29044834307992, 89.47368421052632, 70.76023391812866, 89.27875243664717, 31.189083820662766, 55.65302144249513, 15.204678362573098, 43.76218323586745, 83.1384015594542, 11.403508771929824, 91.42300194931774, 73.87914230019493, 37.8167641325536, 62.28070175438597, 30.01949317738791, 78.16764132553607, 38.10916179337232, 10.33138401559454, 63.64522417153996, 81.67641325536063, 35.08771929824561, 82.06627680311891, 25.925925925925924, 74.3664717348928, 58.38206627680312, 54.67836257309941, 26.218323586744642, 81.87134502923976, 64.71734892787524, 60.916179337231966, 26.510721247563353, 47.27095516569201, 18.323586744639375, 9.551656920077972, 45.02923976608187, 86.25730994152046, 22.417153996101362, 11.013645224171539, 21.44249512670565, 83.17120622568093, 55.6420233463035, 43.190661478599225, 1.4591439688715953, 54.474708171206224, 86.96498054474708, 95.03891050583657, 59.33852140077821, 91.73151750972762, 63.035019455252915, 12.840466926070038, 75.38910505836576, 39.10505836575876, 78.11284046692607, 58.17120622568094, 60.40856031128404, 26.16731517509728, 46.30350194552529, 21.595330739299612, 76.55642023346303, 67.70428015564202, 92.12827988338192, 72.10884353741497, 86.20019436345967, 26.336248785228378, 69.19339164237124, 31.00097181729835, 30.12633624878523, 48.49368318756074, 65.69484936831876, 78.134110787172, 83.57628765792032, 25.267249757045672, 13.60544217687075, 20.99125364431487, 76.96793002915452, 66.1807580174927, 29.834791059280857, 82.02137998056365, 17.29834791059281, 69.48493683187561, 79.10592808551993, 46.25850340136054, 69.38775510204081, 80.56365403304179, 22.157434402332363, 63.45966958211856, 47.327502429543244, 10.981535471331389, 75.80174927113703, 31.389698736637513, 26.62779397473275, 10.884353741496598, 23.71234207968902, 90.57337220602527, 87.56073858114675, 57.6287657920311, 38.969873663751216, 70.74829931972789, 80.466472303207, 51.6504854368932, 45.33980582524272, 62.912621359223294, 12.9126213592233, 77.86407766990291, 76.11650485436893, 38.737864077669904, 49.61165048543689, 40.97087378640777, 71.74757281553397, 17.66990291262136, 73.30097087378641, 60.77669902912621, 49.029126213592235, 77.57281553398059, 31.456310679611647, 22.9126213592233, 77.37864077669903, 61.844660194174764, 65.72815533980582, 31.941747572815533, 31.844660194174757, 18.7378640776699, 78.83495145631068, 82.13592233009709, 79.90291262135922, 60.29126213592233, 42.13592233009709, 61.067961165048544, 79.6116504854369, 31.55339805825243, 32.71844660194175, 9.223300970873787, 77.47572815533981, 70.58252427184466, 73.20388349514563, 65.14563106796116, 50.58252427184466, 32.5242718446602, 46.019417475728154, 67.86407766990291, 7.669902912621359, 37.4757281553398, 28.058252427184467, 72.33009708737865, 24.07766990291262, 10.194174757281553, 64.36893203883494, 87.47572815533981, 85.72815533980582, 23.980582524271846, 60.87378640776699, 67.28155339805825, 29.902912621359224, 35.33980582524272, 80.3883495145631, 34.077669902912625, 12.03883495145631, 27.0873786407767, 32.71844660194175, 15.728155339805824, 86.79611650485437, 20.87378640776699, 50.19417475728155, 73.98058252427184, 40.19417475728155, 36.46944713870029, 64.01551891367603, 32.201745877788554, 36.85741998060136, 83.1231813773036, 19.495635305528612, 15.42192046556741, 87.58486905916585, 89.33074684772066, 60.13579049466537, 67.11930164888457, 53.15227934044617, 53.63724539282251, 56.83802133850631, 18.42870999030068, 22.502424830261884, 86.42095053346266, 79.36046511627907, 49.7093023255814, 75.48449612403101, 44.96124031007752, 44.28294573643411, 62.3062015503876, 67.44186046511628, 34.980620155038764, 71.12403100775194, 61.04651162790697, 55.52325581395349, 27.131782945736433, 15.310077519379844, 23.546511627906977, 4.3604651162790695, 85.75581395348837, 86.24031007751938, 21.511627906976745, 70.54263565891473, 81.3953488372093, 44.72410454985479, 31.752178121974833, 19.845111326234267, 12.778315585672798, 85.18877057115198, 67.66698935140369, 23.330106485963213, 24.878993223620522, 8.712487899322362, 25.943852855759925, 55.372700871248796, 11.132623426911907, 54.307841239109386, 79.28363988383349, 91.67473378509197, 43.65924491771539, 24.491771539206194, 76.18586640851888, 76.18586640851888, 23.814133591481124, 47.047434656340755, 24.10454985479187, 53.92061955469506], "large_up_ratio": [8.30078125, 14.94140625, 46.875, 65.52734375, 32.32421875, 36.1328125, 11.9140625, 54.19921875, 98.33984375, 22.8515625, 56.73828125, 62.20703125, 53.90625, 42.87109375, 24.8046875, 44.3359375, 76.171875, 39.0625, 45.90643274853801, 80.4093567251462, 76.7056530214425, 53.31384015594543, 32.45614035087719, 68.61598440545808, 27.29044834307992, 53.021442495126706, 47.173489278752434, 18.61598440545809, 71.83235867446393, 40.15594541910331, 62.1832358674464, 44.639376218323584, 20.955165692007796, 75.14619883040936, 38.79142300194932, 10.038986354775828, 50.19493177387915, 63.1578947368421, 45.419103313840154, 78.65497076023392, 35.08771929824561, 43.66471734892787, 54.97076023391813, 39.083820662768034, 31.968810916179336, 84.89278752436647, 46.10136452241716, 48.24561403508772, 32.65107212475634, 25.53606237816764, 19.005847953216374, 44.73684210526316, 48.83040935672515, 42.20272904483431, 47.368421052631575, 24.756335282651072, 26.510721247563353, 61.86770428015564, 47.568093385214006, 38.81322957198444, 2.3346303501945527, 68.8715953307393, 75.29182879377431, 82.19844357976653, 50.583657587548636, 67.41245136186771, 31.712062256809336, 35.60311284046693, 37.64591439688716, 48.540856031128406, 71.69260700389106, 38.22957198443579, 49.31906614785993, 34.92217898832685, 59.63035019455253, 32.39299610894942, 49.12451361867704, 53.69649805447471, 82.6044703595724, 56.17103984450923, 55.587949465500486, 27.405247813411076, 76.57920310981535, 42.46841593780369, 57.6287657920311, 16.229348882410108, 38.19241982507289, 51.89504373177842, 60.34985422740525, 44.31486880466473, 22.448979591836736, 17.20116618075802, 53.06122448979592, 33.819241982507286, 36.9290573372206, 78.71720116618076, 27.405247813411076, 55.19922254616132, 68.41593780369291, 52.86686103012633, 42.3712342079689, 65.79203109815354, 22.643343051506317, 65.40330417881438, 39.261418853255584, 24.198250728862973, 53.838678328474245, 44.606413994169095, 41.3022351797862, 17.006802721088434, 35.27696793002916, 63.16812439261419, 85.03401360544217, 83.6734693877551, 26.82215743440233, 53.64431486880466, 63.55685131195335, 47.0873786407767, 37.18446601941748, 55.533980582524265, 37.18446601941748, 44.1747572815534, 76.69902912621359, 35.631067961165044, 61.165048543689316, 62.23300970873786, 47.37864077669903, 31.359223300970875, 45.14563106796117, 66.79611650485437, 59.6116504854369, 67.47572815533981, 62.5242718446602, 32.62135922330097, 77.47572815533981, 36.89320388349515, 41.262135922330096, 50.29126213592233, 37.0873786407767, 15.63106796116505, 44.85436893203884, 60.77669902912621, 71.6504854368932, 61.55339805825243, 38.349514563106794, 39.90291262135922, 66.89320388349515, 49.320388349514566, 60.87378640776699, 18.640776699029125, 82.42718446601943, 70.29126213592232, 34.95145631067961, 75.33980582524272, 46.504854368932044, 72.13592233009709, 79.32038834951456, 43.689320388349515, 14.757281553398057, 69.02912621359224, 46.40776699029126, 50.09708737864078, 24.466019417475728, 21.941747572815533, 24.854368932038835, 88.05825242718447, 62.23300970873786, 29.708737864077673, 35.92233009708738, 85.92233009708737, 39.32038834951456, 34.56310679611651, 49.80582524271845, 58.252427184466015, 24.368932038834952, 44.36893203883495, 45.33980582524272, 31.55339805825243, 77.66990291262135, 38.737864077669904, 30.970873786407765, 67.57281553398057, 54.5631067961165, 68.18622696411252, 38.21532492725509, 32.68671193016489, 31.134820562560623, 74.00581959262851, 32.007759456838016, 9.020368574199807, 62.3666343355965, 79.82541222114452, 32.201745877788554, 55.0921435499515, 61.396702230843836, 72.93889427740058, 33.85063045586809, 72.25994180407372, 28.22502424830262, 42.77400581959263, 54.06976744186046, 21.124031007751938, 47.577519379844965, 71.31782945736434, 37.7906976744186, 61.91860465116279, 31.976744186046513, 32.17054263565892, 74.2248062015504, 20.155038759689923, 37.5, 25.872093023255815, 37.98449612403101, 30.329457364341085, 6.5891472868217065, 61.531007751937985, 69.96124031007753, 41.76356589147287, 39.14728682170542, 70.25193798449612, 70.66795740561471, 24.394966118102616, 33.494675701839306, 43.465634075508234, 69.21587608906098, 55.372700871248796, 24.10454985479187, 61.47144240077444, 19.94191674733785, 69.02226524685382, 35.721200387221685, 19.167473378509197, 80.83252662149081, 34.94675701839303, 70.1839303000968, 59.24491771539206, 37.7541142303969, 69.50629235237173, 61.56824782187803, 48.4027105517909, 32.33301064859632, 40.85188770571152, 37.7541142303969], "up_ratio_diff": [-10.64453125, 9.5703125, 11.71875, -28.125, -4.296875, -20.703125, 4.296875, -13.76953125, 0.390625, -12.40234375, -4.1015625, 19.921875, -23.828125, 15.52734375, 4.6875, -6.93359375, 4.1015625, -1.953125, -31.384015594541907, -9.064327485380119, 5.945419103313842, -35.964912280701746, 1.2670565302144277, 12.962962962962955, 12.085769980506821, 9.259259259259256, -35.96491228070175, 7.212475633528265, -19.590643274853804, -33.723196881091624, 24.36647173489279, -17.641325536062386, -9.064327485380117, -3.0214424951267027, 0.6822612085769952, -0.29239766081871343, -13.450292397660812, -18.518518518518523, 10.33138401559454, -3.4113060428849873, 9.161793372319687, -30.701754385964918, -3.4113060428849984, -15.594541910331383, 5.750487329434694, 3.021442495126714, -18.615984405458086, -12.670565302144249, 6.140350877192985, -21.73489278752437, 0.682261208576998, 35.18518518518518, 3.801169590643277, -44.054580896686154, 24.951267056530213, 13.742690058479532, 5.0682261208577, -21.303501945525294, -8.0739299610895, -4.377431906614787, 0.8754863813229572, 14.396887159533078, -11.673151750972766, -12.840466926070038, -8.754863813229575, -24.319066147859914, -31.32295719844358, 22.762645914396888, -37.7431906614786, 9.43579766536965, -6.420233463035019, -19.941634241245143, -11.089494163424119, 8.75486381322957, 13.326848249027234, 10.797665369649806, -27.43190661478599, -14.00778210116732, -9.523809523809524, -15.937803692905739, -30.612244897959183, 1.0689990281826989, 7.385811467444114, 11.467444120505343, 27.50242954324587, -32.26433430515063, -27.502429543245867, -26.239067055393583, -23.22643343051506, 19.04761904761905, 8.843537414965985, -3.7900874635568513, -23.906705539358597, -32.36151603498543, 7.0942662779397425, -3.3041788143828965, 10.106899902818267, -14.28571428571429, -10.689990281827022, 6.608357628765788, -27.016520894071917, -14.77162293488824, 0.48590864917395504, 1.9436345966958202, -8.066083576287658, 13.216715257531586, -21.96307094266279, 13.216715257531586, 14.674441205053451, 6.122448979591836, 11.564625850340137, -27.405247813411084, -2.526724975704575, 26.044703595724005, -12.147716229348882, -17.103984450923228, -16.90962099125364, -4.5631067961165, -8.15533980582524, -7.37864077669903, 24.271844660194176, -33.68932038834951, 0.5825242718446644, -3.1067961165048565, 11.553398058252423, 21.262135922330096, -24.368932038834952, 13.689320388349513, -28.155339805825243, 6.019417475728151, 10.582524271844662, -10.09708737864078, 31.067961165048548, 9.708737864077671, 0.0970873786407811, -24.951456310679614, -24.46601941747573, 18.3495145631068, 5.24271844660194, -3.1067961165048534, -33.98058252427184, -21.359223300970875, -8.252427184466015, 1.2621359223300987, -3.7864077669902905, -21.165048543689323, -12.718446601941746, 17.766990291262136, 28.155339805825246, 9.41747572815534, 4.951456310679614, -0.2912621359223322, -38.252427184466015, 10.19417475728156, -4.077669902912623, 39.6116504854369, 33.300970873786405, -24.1747572815534, 7.0873786407766985, 31.553398058252423, 18.349514563106794, -22.23300970873786, 0.38834951456310773, 11.747572815533982, -39.51456310679611, 0.5825242718446644, -23.49514563106796, 5.728155339805826, -24.951456310679614, 18.640776699029125, 9.417475728155338, -0.7766990291262155, -30.582524271844658, 24.174757281553394, 12.33009708737864, 17.281553398058254, 12.62135922330097, 15.825242718446605, -9.126213592233013, 17.864077669902915, -19.223300970873787, -6.407766990291264, 14.368932038834947, 31.716779825412228, -25.80019398642095, 0.4849660523763344, -5.722599418040736, -9.11736178467507, 12.512124151309406, -6.401551891367603, -25.218234723569356, -9.505334626576134, -27.934044616876818, -12.027158098933077, 8.244422890397662, 19.30164888457807, -22.987390882638216, 53.83123181377303, 5.722599418040739, -43.64694471387003, -25.290697674418606, -28.58527131782946, -27.906976744186046, 26.356589147286826, -6.492248062015504, -0.3875968992248069, -35.46511627906976, -2.8100775193798446, 3.100775193798444, -40.89147286821705, -18.023255813953487, -1.2596899224806168, 22.674418604651166, 6.782945736434106, 2.228682170542636, -24.224806201550386, -16.279069767441857, 20.251937984496127, -31.39534883720931, -11.143410852713176, 25.943852855759918, -7.357212003872219, 13.649564375605037, 30.687318489835434, -15.972894482090993, -12.294288480154892, 0.7744433688286534, 36.59244917715392, 11.22942884801549, 43.0784123910939, -19.651500484027107, 8.034849951597291, 26.52468538238142, -44.33688286544046, -21.49080348499516, 15.585672797676676, 13.262342691190707, -6.679574056147142, -14.617618586640846, 24.588576960309776, -14.71442400774443, 16.747337850919653, -16.166505324298157], "ma_window": 10, "vol_window": 10};

    function buildLineSeries(name, arr, color, yAxisIndex) {
      return {
        name,
        type: 'line',
        showSymbol: false,
        smooth: false,
        data: data.dates.map((d, i) => [d, arr[i]]),
        connectNulls: false,
        yAxisIndex: yAxisIndex || 0,
        lineStyle: { width: 2, color },
        emphasis: { focus: 'series' },
      };
    }
    function buildBarSeries(name, arr, color, yAxisIndex) {
      return {
        name,
        type: 'bar',
        barWidth: '70%',
        data: data.dates.map((d, i) => [d, arr[i]]),
        yAxisIndex: yAxisIndex || 0,
        itemStyle: {
          color: (params) => {
            const v = params.value && params.value.length >= 2 ? params.value[1] : null;
            if (v == null) return color;
            return v >= 0 ? '#2E6FBB' : '#d9534f';
          }
        },
      };
    }

    const chart1 = echarts.init(document.getElementById('chart1'));
    const option1 = {
      animation: false,
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'cross' },
        formatter: (params) => {
          if (!params || !params.length) return '';
          const dt = params[0].axisValueLabel;
          const lines = [`<div style="font-weight:700;margin-bottom:4px;">${dt}</div>`];
          for (const p of params) {
            const val = (p.data && p.data.length >= 2) ? p.data[1] : null;
            const shown = (val == null) ? '-' : Number(val).toFixed(3) + '%';
            lines.push(`${p.marker} ${p.seriesName}：${shown}`);
          }
          lines.push('<div style="margin-top:6px;color:#6b7280;font-size:12px;">style_ret>0 大盘更强；波动越大切换越剧烈</div>');
          return lines.join('<br/>');
        },
      },
      legend: {
        top: 8,
        data: [
          'style_ret（日度柱，大-小）',
          `${data.ma_window}日均值`,
          `${data.vol_window}日波动(std)`,
        ]
      },
      grid: { left: 56, right: 56, top: 50, bottom: 60 },
      xAxis: {
        type: 'time',
      },
      yAxis: [
        {
          type: 'value',
          name: '强弱（收益）',
          scale: true,
          axisLabel: { formatter: (v) => v.toFixed(2) + '%' },
          splitLine: { lineStyle: { color: '#f0f0f0' } },
        },
        {
          type: 'value',
          name: '波动',
          scale: true,
          axisLabel: { formatter: (v) => v.toFixed(2) + '%' },
          splitLine: { show: false },
        }
      ],
      dataZoom: [
        { type: 'inside', xAxisIndex: 0 },
        { type: 'slider', xAxisIndex: 0, height: 24, bottom: 18 },
      ],
      series: [
        buildBarSeries('style_ret（日度柱，大-小）', data.style_ret, '#2E6FBB', 0),
        buildLineSeries(`${data.ma_window}日均值`, data.style_ma, '#ff7f0e', 0),
        buildLineSeries(`${data.vol_window}日波动(std)`, data.style_vol, '#444444', 1),
      ],
    };
    chart1.setOption(option1);

    const chart2 = echarts.init(document.getElementById('chart2'));
    const option2 = {
      animation: false,
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'cross' },
        formatter: (params) => {
          if (!params || !params.length) return '';
          const dt = params[0].axisValueLabel;
          const lines = [`<div style="font-weight:700;margin-bottom:4px;">${dt}</div>`];
          for (const p of params) {
            const val = (p.data && p.data.length >= 2) ? p.data[1] : null;
            const shown = (val == null) ? '-' : Number(val).toFixed(2) + '%';
            lines.push(`${p.marker} ${p.seriesName}：${shown}`);
          }
          lines.push('<div style="margin-top:6px;color:#6b7280;font-size:12px;">上涨比例=上涨家数/有效家数</div>');
          return lines.join('<br/>');
        },
      },
      legend: {
        top: 8,
        data: ['小盘上涨比例', '大盘上涨比例', '上涨比例差值(大-小)']
      },
      grid: { left: 56, right: 28, top: 50, bottom: 60 },
      xAxis: { type: 'time' },
      yAxis: [
        {
          type: 'value',
          name: '上涨比例',
          min: 0,
          max: 100,
          axisLabel: { formatter: (v) => v.toFixed(0) + '%' },
          splitLine: { lineStyle: { color: '#f0f0f0' } },
        },
        {
          type: 'value',
          name: '差值',
          scale: true,
          axisLabel: { formatter: (v) => v.toFixed(1) + '%' },
          splitLine: { show: false },
        },
      ],
      dataZoom: [
        { type: 'inside', xAxisIndex: 0 },
        { type: 'slider', xAxisIndex: 0, height: 24, bottom: 18 },
      ],
      series: [
        {
          name: '小盘上涨比例',
          type: 'line',
          showSymbol: false,
          data: data.dates.map((d, i) => [d, data.small_up_ratio[i]]),
          yAxisIndex: 0,
          lineStyle: { width: 2, color: '#1f77b4' },
        },
        {
          name: '大盘上涨比例',
          type: 'line',
          showSymbol: false,
          data: data.dates.map((d, i) => [d, data.large_up_ratio[i]]),
          yAxisIndex: 0,
          lineStyle: { width: 2, color: '#ff7f0e' },
        },
        {
          name: '上涨比例差值(大-小)',
          type: 'line',
          showSymbol: false,
          data: data.dates.map((d, i) => [d, data.up_ratio_diff[i]]),
          yAxisIndex: 1,
          lineStyle: { width: 2, color: '#16a34a', type: 'dashed' },
        },
      ],
    };
    chart2.setOption(option2);

    window.addEventListener('resize', () => {
      chart1.resize();
      chart2.resize();
    });
  </script>
</body>
</html>
